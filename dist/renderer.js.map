{"version":3,"file":"renderer.js","sources":["../src/renderer/modules/register.ts","../src/renderer/modules/webpack.ts","../src/renderer/data/modules.ts","../src/renderer/modules/discord.ts","../src/common/logger.ts","../src/renderer/classes/store.ts","../src/renderer/modules/util.ts","../src/renderer/modules/storage.ts","../src/renderer/ui/components/asynccomponent.tsx","../src/renderer/ui/components/errorboundary.tsx","../src/renderer/ui/components/settings.tsx","../src/renderer/modules/injector.ts","../src/renderer/modules/settings.ts","../src/renderer/node/module.ts","../src/renderer/node/require.ts","../src/renderer/ui/components/discordicon.tsx","../src/renderer/ui/addons/card.tsx","../src/renderer/ui/addons/panel.tsx","../src/renderer/managers/plugins.ts","../src/renderer/managers/themes.ts","../src/renderer/modules/dom.ts","../src/renderer/index.ts"],"sourcesContent":["Object.assign(window, {\r\n    HolyAPI: HolyNative.requireModule(\"API\"),\r\n    HolyIPC: HolyNative.requireModule(\"IPC\")\r\n});","// @ts-nocheck\r\n\r\nif (typeof (Array.prototype.at) !== \"function\") {\r\n    Array.prototype.at = function (index) {\r\n        return index < 0 ? this[this.length - Math.abs(index)] : this[index];\r\n    };\r\n}\r\n\r\nif (typeof (setImmediate) === \"undefined\") {\r\n    window.setImmediate = (callback: any) => setTimeout(callback, 0);\r\n}\r\n\r\nexport class Filters {\r\n    static byProps(...props: string[]) {\r\n        return (module: any) => props.every(prop => prop in module);\r\n    }\r\n\r\n    static byDisplayName(name: string, def = false) {\r\n        return (module: any) => (def ? (module = module.default) : module) && typeof (module) === \"function\" && module.displayName === name;\r\n    }\r\n\r\n    static byTypeString(...strings: string[]) {\r\n        return (module: any) => module.type && (module = module.type?.toString()) && strings.every(str => module.indexOf(str) > -1);\r\n    }\r\n}\r\n\r\nexport type ModuleFilter = (module: any, index: number) => boolean;\r\n\r\nclass WebpackModule {\r\n    whenReady: Promise<void>;\r\n    cache = null;\r\n    get Filters() {return Filters;}\r\n    get chunkName() {return \"webpackChunkdiscord_app\";}\r\n    get id() {return \"holy-req\" + Math.random().toString().slice(2, 5);}\r\n\r\n    constructor() {\r\n        this.whenReady = this.waitForGlobal.then(() => new Promise(async onReady => {\r\n            const [Dispatcher, {ActionTypes} = {}] = await this.findByProps(\r\n                [\"dirtyDispatch\"], [\"API_HOST\", \"ActionTypes\"],\r\n                {cache: false, bulk: true, wait: true, forever: true}\r\n            );\r\n\r\n            const listener = function () {\r\n                Dispatcher.unsubscribe(ActionTypes.START_SESSION, listener);\r\n                onReady();\r\n            };\r\n\r\n            Dispatcher.subscribe(ActionTypes.START_SESSION, listener);\r\n        }));\r\n\r\n        window.HolyWebpack = this;\r\n    }\r\n\r\n    async waitFor(filter: ModuleFilter, {retries = 100, all = false, forever = false, delay = 50} = {}) {\r\n        for (let i = 0; (i < retries) || forever; i++) {\r\n            const module = this.findModule(filter, {all, cache: false});\r\n            if (module) return module;\r\n            await new Promise(res => setTimeout(res, delay));\r\n        }\r\n    }\r\n\r\n    parseOptions(args, filter = thing => (typeof (thing) === \"object\" && thing != null && !Array.isArray(thing))) {\r\n        return [args, filter(args.at(-1)) ? args.pop() : {}];\r\n    }\r\n\r\n    request(cache = true) {\r\n        if (cache && this.cache) return this.cache;\r\n        let req = undefined;\r\n\r\n        if (Array.isArray(window[this.chunkName])) {\r\n            const chunk = [[this.id], {}, __webpack_require__ => req = __webpack_require__];\r\n            webpackChunkdiscord_app.push(chunk);\r\n            webpackChunkdiscord_app.splice(webpackChunkdiscord_app.indexOf(chunk), 1);\r\n        }\r\n\r\n        if (!req) console.warn(\"[Webpack] Got empty cache.\");\r\n        if (cache) this.cache = req;\r\n\r\n        return req;\r\n    }\r\n\r\n    findModule(filter: ModuleFilter, {all = false, cache = true, force = false, default: defaultExports = false} = {}) {\r\n        if (typeof (filter) !== \"function\") return void 0;\r\n\r\n        const __webpack_require__ = this.request(cache);\r\n        const found = [];\r\n        let hasError = null;\r\n\r\n        if (!__webpack_require__) return;\r\n\r\n        const wrapFilter = function (module: any, index: number) {\r\n            try {return filter(module, index);}\r\n            catch (error) {\r\n                hasError ??= error;\r\n                return false;\r\n            }\r\n        };\r\n\r\n        for (const id in __webpack_require__.c) {\r\n            const module = __webpack_require__.c[id].exports;\r\n            if (!module || module === window) continue;\r\n            \r\n            switch (typeof module) {\r\n                case \"object\": {\r\n                    if (wrapFilter(module, id)) {\r\n                        if (!all) return module;\r\n                        found.push(module);\r\n                    }\r\n\r\n                    if (module.__esModule && module.default != null && wrapFilter(module.default, id)) {\r\n                        const exports = defaultExports ? module : module.default;\r\n                        if (!all) return exports;\r\n                        found.push(exports);\r\n                    }\r\n\r\n                    if (force && module.__esModule) for (const key in module) {\r\n                        if (!module[key]) continue;\r\n\r\n                        if (wrapFilter(module[key], id)) {\r\n                            if (!all) return module[key];\r\n                            found.push(module[key]);\r\n                        }\r\n                    }\r\n                \r\n                    break;\r\n                }\r\n\r\n                case \"function\": {\r\n                    if (wrapFilter(module, id)) {\r\n                        if (!all) return module;\r\n                        found.push(module);\r\n                    }\r\n\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        \r\n        if (hasError) {\r\n            setImmediate(() => {\r\n                console.warn(\"[Webpack] filter threw an error. This can cause lag spikes at the user's end. Please fix asap.\\n\\n\", hasError);\r\n            });\r\n        }\r\n\r\n        return all ? found : found[0];\r\n    }\r\n\r\n    findModules(filter: ModuleFilter) {return this.findModule(filter, {all: true});}\r\n\r\n    bulk(...options: any[]) {\r\n        const [filters, {wait = false, ...rest}] = this.parseOptions(options);\r\n        const found = new Array(filters.length);\r\n        const searchFunction = wait ? this.waitFor : this.findModule;\r\n        const wrappedFilters = filters.map(filter => {\r\n            if (Array.isArray(filter)) filter = Filters.byProps(...filter);\r\n            if (typeof (filter) === \"string\") filter = Filters.byDisplayName(filter);\r\n\r\n            return (m) => {\r\n                try {return filter(m);}\r\n                catch (error) {return false;}\r\n            };\r\n        });\r\n\r\n        const returnValue = searchFunction.call(this, (module: any) => {\r\n            for (let i = 0; i < wrappedFilters.length; i++) {\r\n                const filter = wrappedFilters[i];\r\n                if (typeof filter !== \"function\" || !filter(module) || found[i] != null) continue;\r\n    \r\n                found[i] = module;\r\n\r\n            }\r\n\r\n            return found.filter(String).length === filters.length;\r\n        }, rest);\r\n\r\n        if (wait) return returnValue.then(() => found);\r\n\r\n        return found;\r\n    }\r\n\r\n    findByProps(...options: any[]) {\r\n        const [props, {bulk = false, wait = false, ...rest}] = this.parseOptions(options);\r\n\r\n        if (!bulk && !wait) {\r\n            return this.findModule(Filters.byProps(...props), rest);\r\n        }\r\n\r\n        if (wait && !bulk) {\r\n            return this.waitFor(Filters.byProps(...props), rest);\r\n        }\r\n\r\n        if (bulk) {\r\n            const filters = props.map((propsArray: string[]) => Filters.byProps(...propsArray)).concat({wait, ...rest});\r\n\r\n            return this.bulk(...filters);\r\n        }\r\n        \r\n\r\n        return null;\r\n    }\r\n\r\n    findByDisplayName(...options: any[]) {\r\n        const [displayNames, {bulk = false, wait = false, ...rest}] = this.parseOptions(options);\r\n\r\n        if (!bulk && !wait) {\r\n            return this.findModule(Filters.byDisplayName(displayNames[0]), rest);\r\n        }\r\n\r\n        if (wait && !bulk) {\r\n            return this.waitFor(Filters.byDisplayName(displayNames[0]), rest);\r\n        }\r\n\r\n        if (bulk) {\r\n            const filters = displayNames.map(filters.map(Filters.byDisplayName)).concat({wait, cache});\r\n\r\n            return this.bulk(...filters);\r\n        }\r\n            \r\n        return null;\r\n    }\r\n\r\n    findIndex(filter: ModuleFilter) {\r\n        let foundIndex = -1;\r\n\r\n        this.findModule((module, index) => {\r\n            if (filter(module)) foundIndex = index; \r\n        });\r\n\r\n        return foundIndex;\r\n    }\r\n\r\n    atIndex(index: number) {\r\n        return this.request(true)?.c[index];\r\n    }\r\n\r\n    get waitForGlobal() {\r\n        return new Promise<void>(async onExists => {\r\n            while (!Array.isArray(window[this.chunkName])) {\r\n                await new Promise(setImmediate);\r\n            }\r\n\r\n            onExists();\r\n        });\r\n    }\r\n\r\n    /**@deprecated Use Webpack.whenReady.then(() => {}) instead. */\r\n    async wait(callback = null) {\r\n        return this.whenReady.then(() => {\r\n            typeof callback === \"function\" && callback();\r\n        });\r\n    }\r\n\r\n    /**@deprecated Use Webpack.whenReady.then(() => {}) instead. */\r\n    get whenExists() {return this.waitForGlobal;}\r\n\r\n    /**@deprecated Use Webpack.whenReady.then(() => {}) instead. */\r\n    on(event: string, listener: Function) {\r\n        switch (event) {\r\n            case \"LOADED\": return this.whenReady.then(listener);\r\n        }\r\n    }\r\n\r\n    /**@deprecated @see Webpack.on */\r\n    get once() {return this.on;}\r\n}\r\n\r\nconst Webpack = new WebpackModule;\r\n\r\nexport default Webpack;","export default {\r\n    // React, Modules & Constants\r\n    Constants: {\r\n        props: [\"API_HOST\", \"ActionTypes\"]\r\n    },\r\n    React: {\r\n        props: [\"createElement\", \"isValidElement\"]\r\n    },\r\n    ReactDOM: {\r\n        props: [\"render\", \"createPortal\"]\r\n    },\r\n    ReactSpring: {\r\n        props: [\"useSpring\", \"Controller\", \"animated\"]\r\n    },\r\n    Flux: {\r\n        type: \"MERGE\",\r\n        props: [\r\n            [\"Store\", \"Dispatcher\"],\r\n            [\"connectStores\"]\r\n        ]\r\n    },\r\n    Dispatcher: {\r\n        props: [\"dirtyDispatch\"]\r\n    },\r\n    ContextMenuActions: {\r\n        props: [\"openContextMenu\"]\r\n    },\r\n    ModalsApi: {\r\n        props: [\"openModal\", \"useModalsStore\"]\r\n    },\r\n    ModalStack: {\r\n        props: [\"push\", \"popAll\"]\r\n    },\r\n    LocaleManager: {\r\n        props: [\"Messages\", \"getAvailableLocales\"],\r\n        ensure: (mod: any) => mod.Messages.CLOSE\r\n    },\r\n    LocaleStore: {\r\n        props: [\"locale\", \"theme\"]\r\n    },\r\n    Lodash: {\r\n        props: [\"zipObjectDeep\"]\r\n    },\r\n    MessageCreators: {\r\n        props: [\"createBotMessage\"]\r\n    },\r\n    MessageActions: {\r\n        props: [\"receiveMessage\"]\r\n    },\r\n    AvatarDefaults: {\r\n        props: [\"BOT_AVATARS\"]\r\n    },\r\n    Moment: {\r\n        props: [\"momentProperties\"]\r\n    },\r\n    // Stores\r\n    SelectedChannelStore: {\r\n        props: [\"_dispatchToken\", \"getChannelId\", \"getLastSelectedChannelId\"]\r\n    },\r\n    // Components\r\n    ModalComponents: {\r\n        props: [\"ModalRoot\", \"ModalHeader\"]\r\n    },\r\n    Link: {\r\n        name: \"Anchor\"\r\n    },\r\n    Switch: {\r\n        name: \"Switch\"\r\n    },\r\n    SwitchItem: {\r\n        name: \"SwitchItem\"\r\n    },\r\n    TextInput: {\r\n        name: \"TextInput\"\r\n    },\r\n    SelectInput: {\r\n        name: \"SelectTempWrapper\"\r\n    },\r\n    Tooltips: {\r\n        props: [\"TooltipContainer\"],\r\n        rename: [\r\n            {from: \"default\", to: \"Tooltip\"},\r\n            {from: \"TooltipContainer\", to: \"Container\"},\r\n            {from: \"TooltipColors\", to: \"Colors\"},\r\n            {from: \"TooltipPositions\", to: \"Positions\"},\r\n            {from: \"TooltipLayer\", to: \"Layer\"},\r\n        ]\r\n    },\r\n    Button: {\r\n        props: [\"BorderColors\", \"Colors\"]\r\n    },\r\n    Slider: {\r\n        name: \"Slider\"\r\n    },\r\n    ConfirmationModal: {\r\n        name: \"ConfirmModal\"\r\n    },\r\n    Text: {\r\n        name: \"Text\"\r\n    },\r\n    Markdown: {\r\n        name: \"Markdown\",\r\n        props: [\"rules\"]\r\n    },\r\n    Caret: {\r\n        name: \"Caret\"\r\n    },\r\n    Forms: {\r\n        props: [\"FormItem\", \"FormTitle\"]\r\n    },\r\n    Flex: {\r\n        name: \"Flex\"\r\n    },\r\n    SearchBar: {\r\n        name: \"SearchBar\"\r\n    },\r\n    Spinner: {\r\n        name: \"Spinner\"\r\n    },\r\n    Scrollers: {\r\n        props: [\"ScrollerAuto\", \"ScrollerThin\", \"default\"]\r\n    },\r\n    // Classes\r\n    Margins: {\r\n        props: [\"marginXLarge\"]\r\n    },\r\n    FormClasses: {\r\n        props: [\"formText\", \"description\"]\r\n    },\r\n    // ContextMenu\r\n    ContextMenu: {\r\n        type: \"MERGE\",\r\n        props: [\r\n            [\"openContextMenu\"],\r\n            [\"MenuItem\", \"MenuControlItem\"]\r\n        ],\r\n        rename: [\r\n            {from: \"default\", to: \"Menu\"},\r\n            {from: \"MenuItem\", to: \"Item\"},\r\n            {from: \"MenuGroup\", to: \"Group\"},\r\n            {from: \"MenuCheckboxItem\", to: \"CheckboxItem\"},\r\n            {from: \"MenuSeparator\", to: \"Separator\"},\r\n            {from: \"MenuCheckboxItem\", to: \"CheckboxItem\"},\r\n            {from: \"MenuRadioItem\", to: \"RadioItem\"},\r\n            {from: \"MenuStyle\", to: \"Style\"},\r\n            {from: \"MenuControlItem\", to: \"ControlItem\"},\r\n            {from: \"openContextMenu\", to: \"open\"},\r\n            {from: \"closeContextMenu\", to: \"close\"},\r\n        ]\r\n    },\r\n    PlaceholderClasses: {\r\n        props: [\"emptyStateImage\", \"emptyStateSubtext\"]\r\n    }\r\n}","import \"./register\";\r\n\r\nimport Webpack from \"./webpack\";\r\nimport Modules from \"@data/modules\";\r\n\r\nexport const DiscordModules: {[key in keyof typeof Modules]: any} = {} as unknown as any;\r\nconst NOOP_RET = _ => _;\r\nconst filters = new Promise<any[]>(resolve => {\r\n    const result = [];\r\n\r\n    for (let moduleId in Modules) {\r\n        const module = Modules[moduleId];\r\n        let filter = NOOP_RET, map = null;\r\n\r\n        if (Array.isArray(module.props)) {\r\n            switch (module.type) {\r\n                case \"MERGE\": {\r\n                    let found = [];\r\n\r\n                    filter = (m: any) => {\r\n                        const matches = module.props.some((props: string[]) => props.every(prop => prop in m));\r\n                        if (matches) found.push(m);\r\n\r\n                        return matches;\r\n                    };\r\n\r\n                    map = () => {\r\n                        return Object.assign({}, ...found);\r\n                    };\r\n\r\n                    break;\r\n                };\r\n                    \r\n                default: {\r\n                    filter = (m: any) => module.props.every((prop: string) => prop in m);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (module.rename) {\r\n            const current = map ?? NOOP_RET;\r\n            map = (mod: any) => {\r\n                mod = current(mod);\r\n                const cloned = {...mod};\r\n\r\n                for (const {from, to} of module.rename) {\r\n                    cloned[to] = mod[from];\r\n                    delete cloned[from];\r\n                }\r\n\r\n                return cloned;\r\n            };\r\n        }\r\n\r\n        if (module.name) {\r\n            const current = filter;\r\n            filter = (mod: any) => (mod.displayName === module.name) && current(mod);\r\n        }\r\n\r\n        if (typeof(module.ensure) === \"function\") {\r\n            const current = filter;\r\n            filter = (mod: any) => current(mod) && module.ensure(mod);\r\n        }\r\n\r\n        if (typeof (filter) !== \"function\") continue;\r\n\r\n        result.push({filter, map, id: moduleId});\r\n    }\r\n\r\n    resolve(result);\r\n});\r\n\r\nexport const promise = Promise.all([filters, Webpack.whenReady]).then(([filters]) => {\r\n    const result = Webpack.bulk(...filters.map(({filter}) => filter));\r\n\r\n    Object.assign(DiscordModules,\r\n        filters.reduce((modules, {id, map}, index) => {\r\n            const mapper = map ?? NOOP_RET;\r\n            modules[id] = mapper(result[index]);\r\n\r\n            return modules;\r\n        }, {})\r\n    );\r\n});\r\n\r\nexport default DiscordModules;","export type LogType = keyof typeof console;\r\n\r\nexport class LoggerModule {\r\n    module: string;\r\n\r\n    constructor(name: string) {\r\n        this.module = name;\r\n    }\r\n\r\n    #parseType(type: LogType) {\r\n        switch (type) {\r\n            case \"info\":\r\n            case \"warn\":\r\n            case \"error\":\r\n            case \"debug\":\r\n                return type;\r\n            default:\r\n                return \"log\";\r\n        }\r\n    }\r\n\r\n    #log(type: LogType,  ...message: any[]) {\r\n        console[this.#parseType(type)](`%c[HolyMod]%c %c[${this.module}]%c`, \"color: #fff133; font-weight: 700;\", \"\", \"color: #fff133;\", \"\", ...message);\r\n    }\r\n\r\n    log(...message: any[]) {this.#log(\"log\", ...message);}\r\n    info(...message: any[]) {this.#log(\"info\", ...message);}\r\n    warn(...message: any[]) {this.#log(\"warn\", ...message);}\r\n    error(...message: any[]) {this.#log(\"error\", ...message);}\r\n    debug(...message: any[]) {this.#log(\"debug\", ...message);}\r\n\r\n    static create(name: string) {\r\n        return new LoggerModule(name);\r\n    }\r\n}\r\n\r\nexport default LoggerModule;","import LoggerModule from \"@common/logger\";\r\nimport DiscordModules from \"@modules/discord\";\r\n\r\nexport type ValidateListener = (...args: any[]) => boolean;\r\n\r\nexport default class Store<events = string> {\r\n    logger = new LoggerModule(\"Store\");\r\n\r\n    events: {[event: string]: Set<Function>} = {};\r\n\r\n    has(event: events): boolean {return event in this.events;}\r\n\r\n    on(event: events, listener: Function) {\r\n        if (!this.has(event)) this.events[event as unknown as string] = new Set<Function>();\r\n\r\n        this.events[event as unknown as string].add(listener);\r\n\r\n        return () => void this.off(event, listener);\r\n    }\r\n\r\n    off(event: events, listener: Function) {\r\n        if (!this.has(event)) return;\r\n\r\n        return this.events[event as unknown as string].delete(listener);\r\n    }\r\n\r\n    emit(event: events, ...args: any[]) {\r\n        if (!this.has(event)) return;\r\n        const toFire = [...this.events[event as unknown as string]];\r\n\r\n        for (let index = 0; index < toFire.length; index++) {\r\n            const listener = toFire[index];\r\n            \r\n            try {listener(...args);}\r\n            catch (error) {this.logger.error(`Store:${this.constructor.name}`, error);}\r\n        }\r\n    }\r\n\r\n    useEvent(event: events, factory: Function, validate: ValidateListener = () => true) {\r\n        const [state, setState] = DiscordModules.React.useState(factory());\r\n        DiscordModules.React.useEffect(() => {\r\n            return this.on(event, (...args) => validate(...args) && setState(factory()));\r\n        }, [event, factory]);\r\n\r\n        return state;\r\n    }\r\n}","export default class Utilities {\r\n    static loadJSON(file: string) {\r\n        try {\r\n            return JSON.parse(HolyAPI.FS.readFile(file, \"utf8\"));\r\n        } catch (error) {\r\n            return error;\r\n        }\r\n    }\r\n\r\n    static assign(object: any, ...properties: any[]) {\r\n        for (let i = 0; i < properties.length; i++) {\r\n            const keys = Object.keys(properties[i]);\r\n\r\n            Object.defineProperties(object, Object.fromEntries(\r\n                keys.map(key => [key, {value: properties[i][key], writeable: false, configurable: false}])\r\n            ));\r\n        }\r\n\r\n        return object;\r\n    }\r\n\r\n    static memoize<T = any>(target: any, key: string, value: T): T {\r\n        Object.defineProperty(target, key, {\r\n            value: value,\r\n            configurable: true\r\n        });\r\n    \r\n        return value;\r\n    };\r\n}","import Store from \"@classes/store\";\r\nimport LoggerModule from \"@common/logger\";\r\nimport DiscordModules from \"./discord\";\r\nimport Utilities from \"./util\";\r\n\r\nconst Logger = new LoggerModule(\"Storage\");\r\nconst {Path, FS} = HolyAPI;\r\n\r\nconst Storage = new class Storage extends Store {\r\n    cache = new Map();\r\n\r\n    folder = Path.resolve(Path.getBasePath(), \"config\");\r\n\r\n    initialize() {\r\n        if (!FS.exists(this.folder)) {\r\n            Logger.log(\"config folder was not found, creating one...\");\r\n\r\n            try {\r\n                FS.createDirectory(this.folder);\r\n            } catch (error) {\r\n                Logger.error(\"Failed to create config folder:\", error);\r\n            }\r\n        }\r\n    }\r\n\r\n    get(name: string, def?: any) {\r\n        const {Lodash} = DiscordModules;\r\n\r\n        if (this.cache.has(name)) return Lodash.merge({}, name, def);\r\n        \r\n        const filepath = Path.resolve(this.folder, name + \".json\");\r\n        if (!FS.exists(filepath)) return def;\r\n\r\n        const data = Utilities.loadJSON(filepath);\r\n        if (data instanceof Error) {\r\n            Logger.error(`Data for ${name} is corrupt!`, data);\r\n            FS.createFile(filepath, \"{}\");\r\n            return def;\r\n        }\r\n\r\n        const final = Lodash.merge({}, data, def);\r\n        this.cache.set(name, final);\r\n        return final;\r\n    }\r\n\r\n    set(name: string, value: any, emit = true) {\r\n        this.cache.set(name, value);\r\n\r\n        const filepath = Path.resolve(this.folder, name + \".json\");\r\n        try {\r\n            FS.createFile(filepath, JSON.stringify(value, null, \"\\t\"));\r\n        } catch (error) {\r\n            Logger.error(`Could not save data for ${name}:`, error);\r\n        }\r\n\r\n        if (emit) this.emit(\"data-changed\", name, value);\r\n    }\r\n\r\n    getMisc(misc: string = \"\", def: any): any {\r\n        const {Lodash} = DiscordModules;\r\n\r\n        return Lodash.get(this.get(\"misc\", def), misc) ?? def;\r\n    }\r\n\r\n    setMisc(misc: any = this.getMisc(\"\", {}), prop: string, value: any) {\r\n        const {Lodash} = DiscordModules;\r\n\r\n        this.set(\"misc\", Lodash.set(misc, prop.split(\".\"), value));\r\n    }\r\n}\r\n\r\nexport default Storage;","import DiscordModules from \"@modules/discord\";\r\nimport Webpack from \"@modules/webpack\";\r\n\r\nexport default function AsyncComponent({_provider, _fallback, ...props}) {\r\n    const [Component, setComponent] = DiscordModules.React.useState(() => (_fallback ?? (() => null)));\r\n\r\n    DiscordModules.React.useEffect(() => {\r\n        _provider().then(comp => setComponent(() => comp));\r\n    }, [_provider, _fallback]);\r\n    \r\n    return (\r\n        <Component {...props} />\r\n    );\r\n};\r\n\r\nexport function from(promise: Promise<any>, fallback?: any, options?: any) {\r\n    const value = {resolved: false, component: null};\r\n\r\n    promise.then((component) => {\r\n        Object.assign(value, {component, resolved: true});\r\n    });\r\n\r\n    return Object.assign(props => {\r\n        if (value.resolved) return React.createElement(value.component, props);\r\n\r\n        return DiscordModules.React.createElement(AsyncComponent, {\r\n            _provider: () => promise,\r\n            _fallback: fallback,\r\n            ...props\r\n        });\r\n    }, options);\r\n};\r\nexport const fromPromise = from; // Alias\r\n\r\nObject.assign(AsyncComponent, {from});","import DiscordModules, {promise} from \"@modules/discord\";\r\nimport {fromPromise} from \"./asynccomponent\";\r\n\r\nconst ErrorBoundary = fromPromise(promise.then(() => {\r\n    return class ErrorBoundary extends DiscordModules.React.Component {\r\n        state = {hasError: false, error: null}\r\n\r\n        static getDerivedStateFromError(error) {\r\n            return {\r\n                hasError: true,\r\n                error: error.message\r\n            };\r\n        }\r\n\r\n        componentDidCatch(error, errorInfo) {\r\n            console.error(error, errorInfo);\r\n        }\r\n\r\n        render() {\r\n            if (this.state.hasError) {\r\n                return (\r\n                    <p>Component Error: {this.state.error}</p>\r\n                );\r\n            }\r\n\r\n            return this.props.children;\r\n        }\r\n    }\r\n}), void 0, {displayName: \"Holy(ErrorBoundary)\"});\r\n\r\nexport default ErrorBoundary;","import DiscordModules, {promise} from \"@modules/discord\";\r\nimport {fromPromise} from \"./asynccomponent\";\r\nimport ErrorBoundary from \"./errorboundary\";\r\n\r\nexport let SettingsContext = null;\r\n\r\npromise.then(() => {\r\n    SettingsContext = DiscordModules.React.createContext();\r\n});\r\n\r\nconst Settings = fromPromise(promise.then(() => {\r\n    return function HolySettings({name, header, children}) {\r\n        const {Caret} = DiscordModules;\r\n        const [subPage, setSubPage] = DiscordModules.React.useState({label: \"\", render: null});\r\n        const hasSubPage = DiscordModules.React.useMemo(() => {\r\n            return typeof (subPage.render) === \"function\" && subPage.label;\r\n        }, [subPage]);\r\n\r\n        const API = {\r\n            setPage(options: {label: string, render: () => React.ReactElement}) {\r\n                setSubPage(options);\r\n            },\r\n            reset() {\r\n                setSubPage({render: null, label: \"\"});\r\n            }\r\n        };\r\n        \r\n        return (\r\n            <ErrorBoundary>\r\n                <SettingsContext.Provider value={API}>\r\n                    <div className=\"pc-settings-panel\">\r\n                        <div className=\"pc-settings-title\">\r\n                            {hasSubPage ? (\r\n                                <div className=\"pc-settings-title-name\" onClick={() => API.reset()}>\r\n                                    {name}\r\n                                </div>\r\n                            ) : name}\r\n                            {hasSubPage ? (\r\n                                <React.Fragment>\r\n                                    <Caret\r\n                                        direction={Caret.Directions.RIGHT}\r\n                                        className=\"pc-settings-title-caret\"\r\n                                    />\r\n                                    <div className=\"pc-settings-title-sub\">{subPage.label}</div>\r\n                                </React.Fragment>\r\n                            ): null}\r\n                            {header}\r\n                        </div>\r\n                        {hasSubPage ? subPage.render() : children()}\r\n                    </div>\r\n                </SettingsContext.Provider>\r\n            </ErrorBoundary>\r\n        );\r\n    } \r\n}), void 0, {displayName: \"Holy(Settings)\"});\r\n\r\nexport default Settings;","import LoggerModule from \"../../common/logger\";\r\n\r\nconst Logger = new LoggerModule(\"Injector\");\r\n\r\n/**@module Injector */\r\n\r\n/**\r\n * @typedef InjectorOptions\r\n * @property {string} caller Caller for the injection, can be used multiple times.\r\n * @property {object|Function} module Module to inject into.\r\n * @property {string} method Method name to inject into, must be a property of {@property Module}\r\n */\r\n\r\n/**\r\n * @typedef Injection\r\n * @property {object|function} module\r\n * @property {() => void} revert\r\n * @property {string} method\r\n * @property {function} originalMethod\r\n * @property {Array<InjectionChild>} children;\r\n */\r\n\r\n/**\r\n * @typedef InjectionChild\r\n * @property {string} caller;\r\n * @property {(thisObject, params: any[], res) => any=} after;\r\n * @property {(thisObject, params: any[]) => any=} before;\r\n * @property {(types = [\"all\"]) => void} uninject;\r\n */\r\n\r\n/**\r\n * All injections\r\n * @type {Array<Injection>}\r\n\r\n */\r\nexport const injections = [];\r\n\r\n/**\r\n * Checks the arguments for the **inject** function.\r\n * @param {InjectorOptions} options \r\n * @returns {void}\r\n \r\n * @private Should only be used by the injector itself.\r\n */\r\nexport function validateOptions(options) {\r\n    if (typeof options.caller !== \"string\") throw new Error(\"No caller for injection specified!\");\r\n    if (typeof options.module === \"undefined\") throw new Error(\"No module to injection specified!\");\r\n    if (typeof options.method === \"undefined\") throw new Error(\"No injection method specified!\");\r\n    if (typeof options.module[options.method] !== \"function\") throw new Error(`Method '${options.method}' appears to be '${typeof options.module[options.method]}' instead of 'function'!`);\r\n    if (Object.isFrozen(options.module)) throw new Error(\"Module appears to be readonly! Cannot injection into it.\");\r\n    if (![\"before\", \"after\"].some(opt => typeof options[opt] === \"function\")) throw new Error(\"No inject type specified!\");\r\n};\r\n\r\n/**\r\n * Injects into a module, pushes another inject into **{injections}**\r\n * @param {object|function} module The module to be injected\r\n * @param {string} method The name of any property in **{module}**\r\n * @returns {Injection}\r\n \r\n */\r\nexport function createInjection(module, method) {\r\n    const originalMethod = module[method];\r\n    const injection = {\r\n        module,\r\n        method,\r\n        originalMethod: module[method],\r\n        children: [],\r\n        revert: () => {\r\n            const index = injections.indexOf(injection);\r\n            if (index < 0) return false;\r\n            module[method] = originalMethod;\r\n            injections.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    module[method] = function (...params) {\r\n        if (!injection.children.length) {\r\n            injection.revert();\r\n            return originalMethod.apply(this, arguments);\r\n        }\r\n\r\n        const before = injection.children.filter(child => typeof child.before === \"function\" && !child.cancelBefore);\r\n        const after = injection.children.filter(child => typeof child.after === \"function\" && !child.cancelAfter);\r\n        let returnValue = params;\r\n\r\n        for (const injection of before) {\r\n            try {\r\n                const tempReturn = injection.before(this, returnValue);\r\n                if (Array.isArray(tempReturn)) returnValue = tempReturn;\r\n            } catch (exception) {\r\n                Logger.error(`Failed to run before injection for ${injection.caller}:\\n`, exception);\r\n            }\r\n        }\r\n\r\n        if (Array.isArray(returnValue)) params = returnValue;\r\n\r\n        returnValue = originalMethod.apply(this, params);\r\n\r\n        for (const injection of after) {\r\n            try {\r\n                const tempReturn = injection.after(this, params, returnValue);\r\n                if (typeof tempReturn !== \"undefined\") returnValue = tempReturn;\r\n            } catch (exception) {\r\n                Logger.error(`Failed to run after injection for ${injection.caller}:\\n`, exception);\r\n            }\r\n        }\r\n\r\n        return returnValue;\r\n    };\r\n    Object.assign(module[method], originalMethod, {\r\n        injection: {\r\n            uninject: injection.revert,\r\n            originalMethod\r\n        },\r\n        toString: () => originalMethod.toString(),\r\n    });\r\n    injections.push(injection);\r\n\r\n    return injection;\r\n};\r\n\r\n/**\r\n * Resolves already existing injections / creates new injections.\r\n * @param {InjectorOptions} options Options provided for the injection process.\r\n * @returns {Injection}\r\n \r\n */\r\nexport function resolveInjection(options) {\r\n    const {module, method} = options;\r\n    let injection = injections.find(e => Object.is(e.module, module) && Object.is(e.method, method));\r\n    if (!injection) {\r\n        injection = createInjection(module, method);\r\n    }\r\n\r\n    return injection;\r\n};\r\n\r\n/**\r\n * Inject into any module that is the typeof Function|Object. \r\n * @param {InjectorOptions} options \r\n * @returns {void}\r\n \r\n * @example\r\n \r\n * ```js\r\n * import Injector from \"kernel/injector\";\r\n * import Logger from \"kernel/logger\";\r\n * \r\n * Injector.inject({\r\n *      caller: \"kernel-mod\",\r\n *      module: window.console,\r\n *      method: \"warn\",\r\n *      before: (thisObject, params, res) => {\r\n *          Logger.log(\"Patched message: \", params);\r\n *      }\r\n * });\r\n * ```\r\n */\r\nexport function inject(options) {\r\n    validateOptions(options);\r\n\r\n    const injection = resolveInjection(options);\r\n\r\n    const child = {\r\n        ...options,\r\n        uninject: (types = [\"all\"]) => {\r\n            const index = injection.children.indexOf(child);\r\n            if (index < 0) return false;\r\n            const foundChild = injection.children[index];\r\n            $loop: for (const type of types) switch (type) {\r\n                case \"before\":\r\n                    foundChild.cancelBefore = true;\r\n                    continue $loop;\r\n                case \"after\":\r\n                    foundChild.cancelAfter = true;\r\n                    continue $loop;\r\n                case \"all\":\r\n                    injection.children.splice(index, 1);\r\n                    break $loop;\r\n            }\r\n            if (foundChild.cancelAfter && !foundChild.before || foundChild.cancelBefore && !foundChild.after) {\r\n                injection.children.splice(index, 1);\r\n            }\r\n        }\r\n    };\r\n\r\n    injection.children.push(child);\r\n\r\n    return child.uninject;\r\n};\r\n\r\n/**\r\n * Collects all injections by the **{caller}**\r\n * @param {string} caller Caller for injection to be resolved.\r\n * @returns {InjectionChild[]}\r\n \r\n */\r\nexport function getInjectionsByCaller(caller) {\r\n    let found = [];\r\n    for (const injection of injections) {\r\n        for (const child of injection.children) {\r\n            if (Object.is(child.caller, caller)) found.push(child);\r\n        }\r\n    }\r\n\r\n    return found;\r\n}\r\n\r\n/**\r\n * Reverts the injection into a module by caller and method names.\r\n * @param {string} caller Caller for the injections. \r\n * @param {\"all\" | \"before\" | \"after\"} types Injection types.\r\n * @returns {boolean}\r\n \r\n */\r\nexport function uninject(caller, types = [\"all\"]) {\r\n    const injections = getInjectionsByCaller(caller);\r\n    if (!injections.length) return false;\r\n\r\n    for (const child of injections) child.uninject(types);\r\n    return true;\r\n};\r\n\r\n/**\r\n * Creates a injector specific for the choosen caller.\r\n * @param {string} caller Caller to for injections.\r\n */\r\nexport function create(caller) {\r\n    if (typeof caller !== \"string\") throw new Error(`Caller must be a string, but got ${typeof caller} instead.`);\r\n\r\n    return {\r\n        inject: options => inject(Object.assign({caller}, options)),\r\n        uninject: types => uninject(caller, types),\r\n        getInjectionsByCaller: () => getInjectionsByCaller(caller)\r\n    };\r\n}\r\n\r\nconst Injector = {\r\n    inject,\r\n    uninject,\r\n    validateOptions,\r\n    injections\r\n};\r\n\r\nexport default Injector;","import Settings from \"@ui/components/settings\";\r\nimport Injector from \"./injector\";\r\nimport Webpack from \"./webpack\";\r\n\r\nexport default class SettingsRenderer {\r\n    static defaultPanels = [\r\n        {section: \"DIVIDER\"},\r\n        {\r\n            section: \"HEADER\",\r\n            label: \"Holymod\",\r\n        },\r\n    ]\r\n\r\n    static panels: any[] = [];\r\n\r\n    static registerPanel(id: string, options: {label: string, render: () => import(\"react\").ReactElement, header?: import(\"react\").ReactElement, order: number}) {\r\n        const {label, render, order} = options;\r\n        const tab = this.panels.find(e => e.id === id)\r\n\r\n        if (tab) throw new Error(`Settings tab ${id} is already registered!`);\r\n\r\n        const panel = {\r\n            section: id,\r\n            label: label,\r\n            order: order,\r\n            className: `holy-settings-${id}-item`,\r\n            element: () => React.createElement(Settings, {\r\n                name: id,\r\n                header: label,\r\n                children: render\r\n            })\r\n        };\r\n\r\n        this.panels = this.panels.concat(panel).sort(this.sortPanels);\r\n\r\n        return () => {\r\n            const index = this.panels.indexOf(panel);\r\n            if (index < 0) return false;\r\n            this.panels.splice(index, 1);\r\n            return true;\r\n        };\r\n    }\r\n\r\n    static unregisterPanel(id: string) {\r\n        const panel = this.panels.findIndex(e => e.id === id);\r\n        if (panel < 0) return;\r\n\r\n        this.panels.splice(panel, 1);\r\n    }\r\n\r\n    static sortPanels(a, b) {\r\n        return a.order - b.order;\r\n    }\r\n\r\n    static patchSettingsView() {\r\n        const SettingsView = Webpack.findByDisplayName(\"SettingsView\");\r\n\r\n        Injector.inject({\r\n            caller: \"HolySettings\",\r\n            module: SettingsView.prototype,\r\n            method: \"getPredicateSections\",\r\n            after: (_, __, res) => {\r\n                if (!Array.isArray(res) || !res.some(e => e?.section?.toLowerCase() === \"changelog\") || res.some(s => s?.id === \"holy-settings\")) return;\r\n\r\n                const index = res.findIndex(s => s?.section?.toLowerCase() === \"changelog\") - 1;\r\n                if (index < 0) return;\r\n\r\n                res.splice(index, 0, ...SettingsRenderer.defaultPanels.concat(SettingsRenderer.panels));\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nWebpack.whenReady.then(() => SettingsRenderer.patchSettingsView());","const {Path, FS, Compilers} = HolyAPI;\r\n\r\nexport const cache = {};\r\nexport const nodeGlobals = [\"require\", \"module\", \"exports\", \"__filename\", \"__dirname\", \"global\"].join(\", \");\r\nexport const globalPaths = [\r\n    Path.resolve(Path.getBasePath(), \"node_modules\")\r\n];\r\n\r\nexport const createBindings = function (extensions: string[], handler: Function) {\r\n    return Object.fromEntries(extensions.map(ext => [ext, handler]));\r\n};\r\nexport const extensions = {\r\n    ...createBindings([\".js\", \".jsx\", \".mjs\"], (module: Module, filename: string) => {\r\n        const fileContent = Compilers.compileJS(filename);\r\n        module._compile(fileContent);\r\n        return module.exports;\r\n    }),\r\n    ...createBindings([\".ts\", \".tsx\"], (module: Module, filename: string) => {\r\n        const filecontent = Compilers.compileTS(filename);\r\n        module._compile(filecontent);\r\n        return module.exports;\r\n    }),\r\n    \".json\": (module: Module, filename: string) => {\r\n        const filecontent = FS.readFile(filename, \"utf8\");\r\n        module.exports = JSON.parse(filecontent);\r\n\r\n        return module.exports;\r\n    },\r\n    \".scss\": (module: Module, filename: string) => {\r\n        const content = Compilers.compileSCSS(filename);\r\n        module.exports = content;\r\n\r\n        return content;\r\n    },\r\n    \".css\": (module: Module, filename: string) => {\r\n        const content = FS.readFile(filename, \"utf8\");\r\n        module.exports = content;\r\n\r\n        return module.exports;\r\n    },\r\n    // I haven't tested this - I assume it works.\r\n    // TODO: Make this not shitty\r\n    \".node\": (module: Module, filename: string) => {\r\n        const thing = HolyAPI.unsafeExecuteJS(`require(${JSON.stringify(filename)})`);\r\n        module.exports = thing;\r\n\r\n        return thing;\r\n    }\r\n};\r\n\r\nexport class Module {\r\n    public id: string;\r\n    public path: string;\r\n    public exports: any;\r\n    public parent: Module | null;\r\n    public filename: string;\r\n    public loaded: boolean;\r\n    public children: Module[];\r\n    public require: any;\r\n    public filecontent?: string;\r\n\r\n    constructor(id: string, parent: Module) {\r\n        this.id = id;\r\n        this.path = Path.dirname(id);\r\n        this.exports = {};\r\n        this.parent = parent;\r\n        this.filename = id;\r\n        this.loaded = false;\r\n        this.children = [];\r\n\r\n        if (parent) parent.children.push(this);\r\n    }\r\n\r\n    _compile(code: string) {\r\n        const wrapped = window.eval(`(function (${nodeGlobals}) {\r\n            ${code}\r\n            //# sourceURL=${JSON.stringify(this.filename).slice(1, -1)}\r\n        })`);\r\n        wrapped(this.require, this, this.exports, this.filename, this.path, window);\r\n    }\r\n};\r\n\r\nexport function resolve(path: string) {\r\n    for (const key in cache) {\r\n        if (key.startsWith(path)) return key;\r\n    }\r\n};\r\n\r\nexport type Require = CallableFunction & {\r\n    resolve(path: string): string;\r\n    cache: object;\r\n};\r\n\r\nexport function createRequire(_path: string, parent: Module): Require {\r\n    const require = (mod: string) => {\r\n        if (typeof (mod) !== \"string\") return;\r\n\r\n        switch (mod) {\r\n            case \"@holy\": return (window as any).HolyAPI;\r\n            default: {\r\n                if (mod.startsWith(\"@holy/\")) {\r\n                    const value = mod.split(\"/\").slice(1).reduce((value, key) => value[key], (window as any).HolyAPI);\r\n                    if (value) return value;\r\n                }\r\n\r\n                return load(_path, mod, parent);\r\n            }\r\n        }\r\n    };\r\n\r\n    Object.assign(require, {cache, resolve});\r\n\r\n    // @ts-ignore\r\n    return require;\r\n};\r\n\r\nfunction hasExtension(mod: string) {\r\n    return Boolean(extensions[Path.extname(mod)]);\r\n};\r\n\r\nexport function getExtension(mod: string) {\r\n    return Path.extname(mod) || Object.keys(extensions).find(ext => FS.exists(mod + ext)) || \"\";\r\n};\r\n\r\nfunction collectPNPMStores(node_modules: string) {\r\n    const store = Path.resolve(node_modules, \".pnpm\");\r\n    if (!FS.exists(store) || !FS.getStats(store).isDirectory()) return [];\r\n    \r\n    const result = [];\r\n\r\n    for (const file of FS.readDirectory(store)) {\r\n        const fullPath = Path.resolve(store, file, \"node_modules\");\r\n\r\n        if (FS.exists(fullPath)) result.push(fullPath);\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction resolveGlobalPath(mod: string, globalPaths: string[]) {\r\n    const directMatch = globalPaths.find(globalPath => FS.exists(Path.resolve(globalPath, mod)));\r\n    if (directMatch) return directMatch;\r\n\r\n    const withExtension = globalPaths.find(globalPath => getExtension(Path.resolve(globalPath, mod)));\r\n    if (withExtension) return withExtension;\r\n\r\n    return \"\";\r\n}\r\n\r\nfunction getGlobalPath(mod: string) {\r\n    const fromGlobals = resolveGlobalPath(mod, globalPaths);\r\n    if (fromGlobals) return fromGlobals;\r\n\r\n    const allPaths = globalPaths.flatMap(globalPath => collectPNPMStores(globalPath));\r\n    const fromPNPM = resolveGlobalPath(mod, allPaths);\r\n    if (fromPNPM) return fromPNPM;\r\n\r\n    return \"\";\r\n}\r\n\r\nfunction getParent(_path: string, mod: string) {\r\n    const concatPath = Path.resolve(_path, mod);\r\n    const globalPath = Path.resolve(getGlobalPath(mod), mod);\r\n\r\n    if (FS.exists(concatPath)) return concatPath;\r\n    if (FS.exists(globalPath)) return globalPath;\r\n\r\n    return \"\";\r\n}\r\n\r\nexport function resolveMain(_path: string, mod: string): string {\r\n    const parent = hasExtension(_path) ? Path.dirname(_path) : getParent(_path, mod);\r\n\r\n    if (!FS.exists(parent)) throw new Error(`Cannot find module ${mod}\\ntree:\\n\\r-${_path}`);\r\n    const files = FS.readDirectory(parent);\r\n\r\n    for (const file of files) {\r\n        const ext = Path.extname(file);\r\n\r\n        if (file === \"package.json\") {\r\n            const pkg = JSON.parse(FS.readFile(Path.resolve(parent, file), \"utf8\"));\r\n            if (!Reflect.has(pkg, \"main\")) continue;\r\n\r\n            return Path.resolve(parent, hasExtension(pkg.main) ? pkg.main : pkg.main + getExtension(Path.resolve(parent, pkg.main)));\r\n        }\r\n\r\n        if (file.slice(0, -ext.length) === \"index\" && extensions[ext]) return Path.resolve(parent, file);\r\n    }\r\n\r\n    if (mod.startsWith(\"./\")) return null;\r\n    const globalMod = globalPaths.find(pth => FS.exists(Path.resolve(pth, mod)));\r\n\r\n    if (globalMod) return resolveMain(globalMod, mod);\r\n\r\n    return globalPaths.find(pth => getExtension(Path.resolve(pth, mod)));\r\n};\r\n\r\nexport function getFilePath(_path: string, mod: string): string {\r\n    const combined = Path.resolve(_path, mod);\r\n    const pth = hasExtension(combined) ? combined : combined + getExtension(combined);\r\n\r\n    if (FS.exists(pth) && FS.getStats(pth).isFile()) return pth;\r\n    if (!hasExtension(mod)) return resolveMain(_path, mod);\r\n\r\n    return mod;\r\n};\r\n\r\nexport function load(_path: string, mod: string, req = null) {\r\n    const file = getFilePath(_path, mod);\r\n    if (!FS.exists(file)) throw new Error(`Cannot find module ${mod}\\ntree:\\n\\r-${_path}`);\r\n    if (cache[file]) return cache[file].exports;\r\n    const stats = FS.getStats(file);\r\n    if (stats.isDirectory()) mod = resolveMain(_path, mod);\r\n    const ext = getExtension(file);\r\n    const loader = extensions[ext];\r\n\r\n    if (!loader) throw new Error(`Cannot find module ${file}`);\r\n    const module = cache[file] = new Module(file, req);\r\n    const require = createRequire(Path.dirname(file), module);\r\n    module.require = require;\r\n\r\n    loader(module, file);\r\n\r\n    return module.exports;\r\n};\r\n\r\n// TODO: Add globalPaths support\r\nconst NodeModule = {_extensions: extensions, cache, _load: load, globalPaths: globalPaths};\r\n\r\nexport default NodeModule;","import {createRequire} from \"./module\";\r\n\r\nconst Require = createRequire(HolyAPI.Path.resolve(HolyAPI.Path.getBasePath(), \"plugins\"), null);\r\n\r\nexport default Require;","import Webpack from \"@modules/webpack\";\r\n\r\nexport const cache = new Map();\r\n\r\nexport default function DiscordIcon({name, ...props}) {\r\n    const IconComponent = cache.get(name)\r\n        ?? (cache.set(name, Webpack.findByDisplayName(name)), cache.get(name))\r\n        ?? (() => null);\r\n\r\n    return (\r\n        <IconComponent {...props} />\r\n    );\r\n};","import DiscordModules from \"@modules/discord\";\r\nimport DiscordIcon from \"@ui/components/discordicon\";\r\nimport {SettingsContext} from \"../components/settings\";\r\nimport \"./card.scss\";\r\n\r\nexport function ToolButton({label, icon, onClick, danger = false, disabled = false}) {\r\n    const {Button, Tooltips: {Tooltip}} = DiscordModules;\r\n\r\n    return (\r\n        <Tooltip text={label} position=\"top\">\r\n            {props => (\r\n                <Button\r\n                    {...props}\r\n                    className=\"holy-settings-toolbutton\"\r\n                    look={Button.Looks.BLANK}\r\n                    size={Button.Sizes.NONE}\r\n                    onClick={onClick}\r\n                    disabled={disabled}\r\n                >\r\n                    <DiscordIcon name={icon} color={danger ? \"#ed4245\" : void 0} width=\"20\" height=\"20\" />\r\n                </Button>\r\n            )}\r\n        </Tooltip>\r\n    );\r\n};\r\n\r\nexport function ButtonWrapper({value, onChange, disabled = false}) {\r\n    const {Switch} = DiscordModules;\r\n    const [isChecked, setChecked] = React.useState(value);\r\n\r\n    return (\r\n        <Switch\r\n            className=\"holy-settings-addons-switch\"\r\n            checked={isChecked}\r\n            disabled={disabled}\r\n            onChange={() => {\r\n                onChange(!isChecked);\r\n                setChecked(!isChecked);\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\n// function getPanel(id) {\r\n//     const get = settings.get(id);\r\n//     if (get) return get;\r\n\r\n//     for(const [key, options] of settings.entries()) {\r\n//         if (options.category == id) return settings.get(key);\r\n//     }\r\n\r\n//     return null;\r\n// }\r\n\r\nexport default function AddonCard({addon, manager, toggle, isEnabled}) {\r\n    const {Markdown} = DiscordModules;\r\n    const [, forceUpdate] = React.useReducer(n => n + 1, 0);\r\n    const SettingsApi = React.useContext<any>(SettingsContext);\r\n\r\n    React.useEffect(() => {\r\n        manager.on(\"toggle\", (name: string) => {\r\n            if (name !== addon.entityID) return;\r\n\r\n            forceUpdate();\r\n        });\r\n    }, [addon, manager]);\r\n\r\n    return (\r\n        <div style={({\"--plugin-color\": addon.color} as any)} className={\"holy-settings-addon-card \" + addon.manifest.name?.replace(/ /g, \"-\")}>\r\n            <div className=\"holy-settings-card-header\">\r\n                <div className=\"holy-settings-card-field holy-settings-card-name\">{addon.manifest.name}</div>\r\n                {\"version\" in addon.manifest && <div className=\"holy-settings-card-field\">v{addon.manifest.version}</div>}\r\n                {\"author\" in addon.manifest && <div className=\"holy-settings-card-field\"> by {addon.manifest.author}</div>}\r\n                <div className=\"holy-settings-card-controls\">\r\n                    {/* {getPanel(addon.entityID) && <ToolButton\r\n                        label=\"Settings\"\r\n                        icon=\"Gear\"\r\n                        onClick={() => {\r\n                            const Settings = getPanel(addon.entityID);\r\n\r\n                            SettingsApi.setPage({\r\n                                label: addon.manifest.name,\r\n                                render: typeof(Settings.render) === \"function\"\r\n                                    ? (() => DiscordModules.React.createElement(Settings.render, cache.get(addon.entityID).makeProps()))\r\n                                    : Settings.render\r\n                            });\r\n                        }}\r\n                    />} */}\r\n                    <ToolButton label=\"Reload\" icon=\"Replay\" disabled={!manager.isEnabled?.(addon) ?? true} onClick={() => manager.reload(addon)} />\r\n                    <ToolButton label=\"Open Path\" icon=\"Folder\" onClick={() => {\r\n                        // PCCompatNative.executeJS(`require(\"electron\").shell.showItemInFolder(${JSON.stringify(addon.path)})`);\r\n                    }} />\r\n                    <ToolButton label=\"Delete\" icon=\"Trash\" onClick={() => {\r\n                        // Modals.showConfirmationModal(\"Are you sure?\", `Are you sure that you want to delete the ${type} \"${addon.manifest.name}\"?`, {\r\n                        //     danger: true,\r\n                        //     onConfirm: () => {\r\n                        //         manager.delete(addon.entityID)\r\n                        //     }\r\n                        // });\r\n                    }} />\r\n                    <ButtonWrapper value={isEnabled?.(addon) ?? false} onChange={() => {\r\n                        toggle(addon);\r\n                    }} />\r\n                </div>\r\n            </div>\r\n            {addon.manifest.description && (\r\n                <div className=\"holy-settings-card-desc\">\r\n                    <Markdown>{addon.manifest.description}</Markdown>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}","import DiscordModules from \"@modules/discord\";\r\nimport Storage from \"@modules/storage\";\r\nimport DiscordIcon from \"@ui/components/discordicon\";\r\nimport AddonCard from \"./card\";\r\nimport \"./panel.scss\";\r\n\r\nexport type SearchOptions = {\r\n    description: boolean;\r\n    author: boolean;\r\n    name: boolean;\r\n};\r\n\r\nexport type SortOption = \"name\" | \"author\" | \"description\" | \"added\";\r\n\r\nconst sortLabels = [\"name\", \"author\", \"version\", \"description\", \"added\"];\r\nconst searchLabels = [\"name\", \"author\", \"description\"];\r\nconst orderLabels = [\"ascending\", \"descending\"];\r\n\r\nexport async function sortAddons(addons: any[], order: \"ascending\" | \"descending\", query: string, searchOptions: SearchOptions, sortBy: SortOption) {\r\n    return addons\r\n        .filter(addon => {\r\n            if (!query) return true;\r\n            const {manifest} = addon;\r\n            // Use String() wrapper for clever escaping\r\n            return [\"name\", \"author\", \"description\"].some(type => searchOptions[type] && String(manifest[type] ?? \"\").toLowerCase().includes(query.toLowerCase()));\r\n        })\r\n        .sort((a, b) => {\r\n            const first = a.manifest[sortBy] ?? \"\";\r\n            const second = b.manifest[sortBy] ?? \"\";\r\n            if (typeof (first) === \"string\") return String(first).toLowerCase().localeCompare(String(second).toLowerCase());\r\n            if (first > second) return 1;\r\n            if (second > first) return -1;\r\n\r\n            return 0;\r\n        })\r\n        [order === \"ascending\" ? \"reverse\" : \"slice\"](0);\r\n};\r\n\r\nexport function getSettings() {\r\n\r\n}\r\n\r\nexport function OverflowContextMenu({type: addonType}) {\r\n    const {ContextMenu} = DiscordModules;\r\n\r\n    const [sortBy, searchOptions, order] = Storage.useEvent(\"data-changed\", () => [\r\n        Storage.getMisc(`${addonType}.sortBy`, \"name\"),\r\n        Storage.getMisc(`${addonType}.searchOption`, {author: true, name: true, description: true}),\r\n        Storage.getMisc(`${addonType}.order`, \"descending\")\r\n    ]);\r\n\r\n    return (\r\n        <ContextMenu.Menu navId=\"OverflowContextMenu\">\r\n            <ContextMenu.ControlItem\r\n                id=\"order-header\"\r\n                control={() => (\r\n                    <h5 className=\"holy-settings-overflow-header\">Order</h5>\r\n                )}\r\n            />\r\n            <ContextMenu.Separator key=\"separator\" />\r\n            <ContextMenu.Group>\r\n                {orderLabels.map(type => (\r\n                    <ContextMenu.RadioItem\r\n                        key={\"order-\" + type}\r\n                        label={type[0].toUpperCase() + type.slice(1)}\r\n                        checked={order === type}\r\n                        id={\"sortBy-\" + type}\r\n                        action={() => {\r\n                            Storage.setMisc(void 0, `${addonType}.order`, type);\r\n                        }}\r\n                    />\r\n                ))}\r\n            </ContextMenu.Group>\r\n            <ContextMenu.Separator key=\"separator\" />\r\n            <ContextMenu.ControlItem\r\n                id=\"sort-header\"\r\n                control={() => (\r\n                    <h5 className=\"holy-settings-overflow-header\">Sort Options</h5>\r\n                )}\r\n            />\r\n            <ContextMenu.Separator key=\"separator\" />\r\n            <ContextMenu.Group>\r\n                {sortLabels.map(type => (\r\n                    <ContextMenu.RadioItem\r\n                        key={\"sortBy-\" + type}\r\n                        label={type[0].toUpperCase() + type.slice(1)}\r\n                        checked={sortBy === type}\r\n                        id={\"sortBy-\" + type}\r\n                        action={() => {\r\n                            Storage.setMisc(void 0, `${addonType}.sortBy`, type);\r\n                        }}\r\n                    />\r\n                ))}\r\n            </ContextMenu.Group>\r\n            <ContextMenu.Separator key=\"separator\" />\r\n            <ContextMenu.ControlItem\r\n                id=\"search-header\"\r\n                control={() => (\r\n                    <h5 className=\"holy-settings-overflow-header\">Search Options</h5>\r\n                )}\r\n            />\r\n            <ContextMenu.Separator key=\"separator\" />\r\n            <ContextMenu.Group>\r\n                {searchLabels.map(type => (\r\n                    <ContextMenu.CheckboxItem\r\n                        key={\"search-\" + type}\r\n                        id={\"search-\" + type}\r\n                        label={type[0].toUpperCase() + type.slice(1)}\r\n                        checked={searchOptions[type]}\r\n                        action={() => {\r\n                            Storage.setMisc(void 0, `${addonType}.searchOption.${type}`, !(searchOptions[type]));\r\n                        }}\r\n                    />\r\n                ))}\r\n            </ContextMenu.Group>\r\n        </ContextMenu.Menu>\r\n    );\r\n};\r\n\r\nexport default function AddonPanel({addons: ManagerAddons, isEnabled, toggle, type, manager}) {\r\n    const {React, Button, ContextMenu, Tooltips, SearchBar, PlaceholderClasses, LocaleManager} = DiscordModules;\r\n\r\n    const [query, setQuery] = React.useState(\"\");\r\n    const [addons, setAddons] = React.useState(null);\r\n    const [sortBy, searchOptions, order] = Storage.useEvent(\"data-updated\", () => [\r\n        Storage.getMisc(`${type}.sortBy`, \"name\"),\r\n        Storage.getMisc(`${type}.searchOption`, {author: true, name: true, description: true}),\r\n        Storage.getMisc(`${type}.order`, \"descending\")\r\n    ]);\r\n\r\n    React.useEffect(() => {\r\n        manager.on(\"delete\", () => {\r\n            setAddons(manager.addons)\r\n        });\r\n    }, [manager]);\r\n\r\n    React.useEffect(() => {\r\n        sortAddons(\r\n            Array.from(ManagerAddons.values()),\r\n            order,\r\n            query,\r\n            searchOptions,\r\n            sortBy\r\n        ).then(addons => setAddons(addons));\r\n    }, [query, manager, type, order, searchOptions, sortBy]);\r\n\r\n    return (\r\n        <div className=\"holy-settings-addons\">\r\n            <div className=\"holy-settings-addons-controls\">\r\n                <SearchBar\r\n                    // @ts-ignore\r\n                    onQueryChange={(value) => setQuery(value)}\r\n                    onClear={() => setQuery(\"\")}\r\n                    placeholder={`Search ${type}s...`}\r\n                    size={SearchBar.Sizes.SMALL}\r\n                    query={query}\r\n                    className=\"holy-settings-addons-search\"\r\n                />\r\n                <Tooltips.Tooltip text=\"Open folder\" position=\"bottom\">\r\n                    {props => (\r\n                        <Button\r\n                            {...props}\r\n                            size={Button.Sizes.NONE}\r\n                            look={Button.Looks.BLANK}\r\n                            className=\"holy-settings-open-folder\"\r\n                            onClick={() => null /* PCCompatNative.executeJS(`require(\"electron\").shell.openPath('${JSON.stringify(manager.folder)}')`) */}\r\n                        >\r\n                            <DiscordIcon name=\"Folder\" />\r\n                        </Button>\r\n                    )}\r\n                </Tooltips.Tooltip>\r\n                <Tooltips.Tooltip text=\"Options\" position=\"bottom\">\r\n                    {props => (\r\n                        <Button\r\n                            {...props}\r\n                            size={Button.Sizes.NONE}\r\n                            look={Button.Looks.BLANK}\r\n                            className=\"holy-settings-overflow-menu\"\r\n                            onClick={e => {\r\n                                ContextMenu.open(e, () => (\r\n                                    <OverflowContextMenu type={type} />\r\n                                ));\r\n                            }}\r\n                        >\r\n                            <DiscordIcon name=\"OverflowMenu\" />\r\n                        </Button>\r\n                    )}\r\n                </Tooltips.Tooltip>\r\n            </div>\r\n            <div className=\"holy-settings-card-scroller\">\r\n                {addons?.length\r\n                    ? addons.map(addon => <AddonCard\r\n                        addon={addon}\r\n                        // hasSettings={false}\r\n                        manager={manager}\r\n                        type={type}\r\n                        key={addon.manifest.name}\r\n                        openSettings={() => {}}\r\n                        isEnabled={isEnabled}\r\n                        toggle={toggle}\r\n                    />)\r\n                    : <div className=\"holy-settings-empty\">\r\n                        <div className={PlaceholderClasses.emptyStateImage} />\r\n                        <p>{LocaleManager.Messages.GIFT_CONFIRMATION_HEADER_FAIL}</p>\r\n                        <p>{LocaleManager.Messages.SEARCH_NO_RESULTS}</p>\r\n                    </div>\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n}","import Store from \"@classes/store\";\r\nimport LoggerModule from \"@common/logger\";\r\nimport SettingsRenderer from \"@modules/settings\";\r\nimport Storage from \"@modules/storage\";\r\nimport Utilities from \"@modules/util\";\r\nimport Module from \"@node/module\";\r\nimport Require from \"@node/require\";\r\nimport AddonPanel from \"@ui/addons/panel\";\r\n\r\nconst {FS, Path} = HolyAPI;\r\nconst Logger = new LoggerModule(\"PluginsManager\");\r\n\r\nconst PluginsManager = new class PluginsManager extends Store {\r\n    folder = Path.resolve(Path.getBasePath(), \"plugins\");\r\n    extensions = [\".js\", \".jsx\", \".ts\", \".tsx\", \".mjs\"];\r\n\r\n    plugins = new Map();\r\n\r\n    enabledPlugins: Set<string>;\r\n\r\n    initialize(): void {\r\n        this.enabledPlugins = new Set(Object.keys(Storage.get(\"plugins\", {})));\r\n        \r\n        SettingsRenderer.registerPanel(\"plugins\", {\r\n            label: \"Plugins\",\r\n            order: 1,\r\n            render: () => React.createElement(AddonPanel, {\r\n                type: \"plugins\",\r\n                manager: this,\r\n                toggle: this.toggle.bind(this),\r\n                addons: this.plugins,\r\n                isEnabled: (plugin) => {\r\n                    plugin = this.resolve(plugin);\r\n                    if (!plugin) return false;\r\n\r\n                    return this.enabledPlugins.has(plugin.id);\r\n                }\r\n            })\r\n        });\r\n\r\n        this.loadAllPlugins();\r\n    }\r\n\r\n    resolve(pluginOrId: any): any {\r\n        if (typeof pluginOrId === \"string\") return this.plugins.get(pluginOrId);\r\n\r\n        return pluginOrId;\r\n    }\r\n\r\n    getManifest(filepath: string, filename: string): any {\r\n        try {\r\n            return JSON.parse(FS.readFile(filepath, \"utf8\"));\r\n        } catch (error) {\r\n            Logger.error(`Failed to load manifest for ${filename}:`, error);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    getEntryFile(filepath: string, manifest: any, filename: string): string | null {\r\n        if (typeof manifest.entry === \"string\") {\r\n            const path = Path.resolve(filepath, manifest.entry);\r\n            if (FS.exists(path)) return path;\r\n        }\r\n\r\n        const found = this.extensions.find(ext => FS.exists(Path.resolve(filepath, \"index\" + ext)));\r\n        if (found) return found;\r\n\r\n        Logger.error(`Failed to get entry file for ${filename}:`, new Error(\"Could not resolve entry file.\"));\r\n        return null;\r\n    }\r\n\r\n    loadAllPlugins(): void {\r\n        if (!FS.exists(this.folder)) {\r\n            Logger.log(\"Plugins folder doesn't exists, creating it...\");\r\n\r\n            try {\r\n                FS.createDirectory(this.folder);\r\n            } catch (error) {\r\n                Logger.error(\"Failed to create plugins directory:\", error);\r\n                return;\r\n            }\r\n        }\r\n\r\n        Logger.log(\"Loading plugins...\");\r\n        const filenames = FS.readDirectory(this.folder);\r\n        for (let i = 0; i < filenames.length; i++) {\r\n            const filename = Path.resolve(this.folder, filenames[i]);\r\n            const manifestPath = Path.resolve(filename, \"manifest.json\");\r\n            if (!FS.exists(manifestPath)) continue;\r\n\r\n            this.loadPlugin(filename, true);\r\n        }\r\n    }\r\n\r\n    clearCache(location: string): void {\r\n        if (!Path.isAbsolute(location)) location = Path.resolve(this.folder, location);\r\n\r\n        let current;\r\n        while (current = Require.resolve(location)) {\r\n            delete Module.cache[current];\r\n        }\r\n    }\r\n\r\n    loadPlugin(filename: string, log = true): void {\r\n        const manifestPath = Path.resolve(filename, \"manifest.json\");\r\n        const manifest = this.getManifest(manifestPath, Path.basename(filename));\r\n        if (!manifest) return;\r\n        const entryFile = this.getEntryFile(filename, manifest, Path.basename(filename));\r\n        const id = Path.basename(filename);\r\n        if (!entryFile) return;\r\n\r\n        let exports: any = {};\r\n        try {\r\n            this.clearCache(filename);\r\n            const partialExports = Require(entryFile); \r\n            exports = partialExports.__esModule ? partialExports.default : partialExports;\r\n\r\n            Utilities.assign(exports.prototype, {\r\n                manifest: Object.freeze(manifest),\r\n                id: id,\r\n                displayName: manifest.name ?? id,\r\n                path: filename\r\n            });\r\n\r\n            exports = new exports();\r\n        } catch (error) {\r\n            return Logger.error(`Failed to compile ${manifest.name ?? id}:`, error);\r\n        }\r\n\r\n        if (log) {\r\n            Logger.log(`${exports.displayName} was loaded!`);\r\n        }\r\n\r\n        this.plugins.set(id, exports);\r\n\r\n        if (this.enabledPlugins.has(id)) {\r\n            this.startPlugin(id, true);\r\n        }\r\n    }\r\n\r\n    unloadPlugin(addon: any, log = true): boolean {\r\n        const plugin = this.resolve(addon);\r\n        if (!plugin) return;\r\n\r\n        const success = this.stopPlugin(plugin);\r\n        this.plugins.delete(plugin.id);\r\n        this.clearCache(addon.path);\r\n\r\n        if (log) {\r\n            Logger.log(`${plugin.displayName} was unloaded!`);\r\n        }\r\n\r\n        return success;\r\n    }\r\n\r\n    startPlugin(addon: any, log = true) {\r\n        const plugin = this.resolve(addon);\r\n        if (!plugin) return;\r\n\r\n        try {\r\n            if (typeof plugin.onStart === \"function\") plugin.onStart();\r\n        } catch (error) {\r\n            Logger.error(`Could not start ${plugin.displayName}:`, error);\r\n            return false;\r\n        } finally {\r\n            if (log) {\r\n                Logger.log(`${plugin.displayName} was started!`);\r\n            }\r\n\r\n            return true;\r\n        }\r\n    }\r\n\r\n    stopPlugin(addon: any, log = true) {\r\n        const plugin = this.resolve(addon);\r\n        if (!plugin) return false;\r\n\r\n        try {\r\n            if (typeof plugin.onStop === \"function\") plugin.onStop();\r\n        } catch (error) {\r\n            Logger.error(`Failed to stop ${plugin.manifest.name}:`, error);\r\n            return false;\r\n        } finally {\r\n            if (log) {\r\n                Logger.log(`${plugin.manifest.name} was stopped!`);\r\n            }\r\n\r\n            return true;\r\n        }\r\n    }\r\n\r\n    reloadPlugin(addon: any) {\r\n        const plugin = this.resolve(addon);\r\n        if (!addon) return;\r\n\r\n        const success = this.unloadPlugin(plugin, false);\r\n        if (!success) {\r\n            return Logger.error(`Failed to reload plugin ${plugin.displayName}`);\r\n        }\r\n\r\n        this.loadPlugin(plugin.path, false);\r\n        Logger.log(`Reloaded ${plugin.displayName}`);\r\n    }\r\n\r\n    enablePlugin(addon: any, log = true) {\r\n        const plugin = this.resolve(addon);\r\n        if (!addon) return;\r\n        this.enabledPlugins.add(plugin.id);\r\n        this.saveState();\r\n        this.startPlugin(plugin, false);\r\n\r\n        if (log) {\r\n            Logger.log(`${plugin.displayName} was enabled!`);\r\n            this.emit(\"toggle\", plugin.id, true);\r\n        }\r\n    }\r\n\r\n    disablePlugin(addon: any, log = true) {\r\n        const plugin = this.resolve(addon);\r\n        if (!addon) return;\r\n        this.enabledPlugins.delete(plugin.id);\r\n        this.saveState();\r\n        this.stopPlugin(plugin, false);\r\n\r\n        if (log) {\r\n            Logger.log(`${plugin.displayName} was disabled!`);\r\n            this.emit(\"toggle\", plugin.id, false);\r\n        }\r\n    }\r\n\r\n    toggle(addon: any) {\r\n        const plugin = this.resolve(addon);\r\n        if (!plugin) return;\r\n\r\n        if (this.enabledPlugins.has(plugin.id)) {\r\n            this.disablePlugin(plugin, true);\r\n        } else {\r\n            this.enablePlugin(plugin, true);\r\n        }\r\n    }\r\n    \r\n    saveState() {\r\n        Storage.set(\"plugins\", Object.fromEntries([...this.enabledPlugins.values()].map((key) => [key, true])));\r\n    }\r\n}\r\n\r\nexport default PluginsManager;","export default class ThemesManager {\r\n    initialize(): void {\r\n        \r\n    }\r\n}","import Utilities from \"./util\";\r\n\r\nexport default class DOM {\r\n    static elements = {};\r\n\r\n    static get head() {return Utilities.memoize(this, \"head\", document.head.appendChild(this.createElement(\"holy-head\")));}\r\n\r\n    static createElement(type: string, options = {}, ...children: (string | Node)[]) {\r\n        const node = Object.assign(document.createElement(type), options);\r\n\r\n        node.append(...children);\r\n\r\n        return node;\r\n    }\r\n\r\n    static injectCSS(id: string, cssOrURL: string, options?: {type: \"PLAIN\" | \"URL\", documentHead?: boolean}) {\r\n        switch (options?.type ?? \"PLAIN\") {\r\n            case \"PLAIN\":\r\n                var element = this.createElement(\"style\", {\r\n                    id,\r\n                    textContent: cssOrURL\r\n                });\r\n                break;\r\n            case \"URL\":\r\n                var element = this.createElement(\"link\", {\r\n                    rel: \"stylesheet\",\r\n                    href: cssOrURL\r\n                });\r\n                break;\r\n        }\r\n\r\n        (options?.documentHead ? document.head : this.head).appendChild(element);\r\n        this.elements[id] = element;\r\n\r\n        return element;\r\n    }\r\n\r\n    static injectJS(id: string, url: string, options?: {documentHead: boolean}) {\r\n        return new Promise((resolve, reject) => {\r\n            const script = this.createElement(\"script\", {id, src: url, onload: resolve, onerror: reject});\r\n            (options?.documentHead ? document.head : this.head).appendChild(script);\r\n            this.elements[id] = script;\r\n        });\r\n    }\r\n\r\n    static getElement(id: string) {\r\n        return this.elements[id] || this.head.querySelector(`style[id=\"${id}\"]`);\r\n    }\r\n\r\n    static clearCSS(id: string) {\r\n        const element = this.getElement(id);\r\n        \r\n        if (element) element.remove();\r\n        delete this.elements[id];\r\n    }\r\n}","/// <reference path=\"../../types.d.ts\" />\r\n\r\nimport DiscordModules, {promise as DiscordPromise} from \"@modules/discord\";\r\nimport LoggerModule from \"@common/logger\";\r\nimport Storage from \"@modules/storage\";\r\nimport {Plugins, Themes} from \"./managers\";\r\nimport Require from \"./node/require\";\r\nimport * as Modules from \"./modules\";\r\n\r\nconst Logger = new LoggerModule(\"Core\");\r\n\r\nexport default new class HolyMod {\r\n    async start() {\r\n        await DiscordPromise;\r\n        Logger.log(\"Initialize\");\r\n        \r\n        this.injectStyles();\r\n\r\n        Object.assign(window, {\r\n            require: Require,\r\n            React: DiscordModules.React,\r\n            ReactDOM: DiscordModules.ReactDOM\r\n        });\r\n\r\n        Object.assign(window.HolyAPI, Modules, {Plugins, Themes});\r\n\r\n        Storage.initialize();\r\n        Plugins.initialize();\r\n    }\r\n\r\n    injectStyles(): void {\r\n        const {Path, FS} = HolyAPI;\r\n\r\n        const path = Path.resolve(Path.getBasePath(), \"dist\", \"main.css\");\r\n\r\n        Modules.DOM.injectCSS(\"CoreStyles\", FS.readFile(path, \"utf8\"));\r\n    }\r\n\r\n    stop() {}\r\n}"],"names":["Object","assign","window","HolyAPI","HolyNative","requireModule","HolyIPC","Array","prototype","at","index","length","Math","abs","setImmediate","callback","setTimeout","Filters","byProps","props","module","every","prop","byDisplayName","name","def","default","displayName","byTypeString","strings","type","toString","str","indexOf","WebpackModule","chunkName","id","random","slice","waitFor","filter","retries","all","forever","delay","i","findModule","cache","Promise","res","parseOptions","args","thing","isArray","pop","request","req","undefined","chunk","__webpack_require__","webpackChunkdiscord_app","push","splice","console","warn","force","defaultExports","found","hasError","wrapFilter","error","c","exports","__esModule","key","findModules","bulk","options","filters","wait","rest","searchFunction","wrappedFilters","map","m","returnValue","call","String","then","findByProps","propsArray","concat","findByDisplayName","displayNames","findIndex","foundIndex","atIndex","waitForGlobal","onExists","whenReady","whenExists","on","event","listener","once","onReady","Dispatcher","ActionTypes","unsubscribe","START_SESSION","subscribe","HolyWebpack","Webpack","Constants","React","ReactDOM","ReactSpring","Flux","ContextMenuActions","ModalsApi","ModalStack","LocaleManager","ensure","mod","Messages","CLOSE","LocaleStore","Lodash","MessageCreators","MessageActions","AvatarDefaults","Moment","SelectedChannelStore","ModalComponents","Link","Switch","SwitchItem","TextInput","SelectInput","Tooltips","rename","from","to","Button","Slider","ConfirmationModal","Text","Markdown","Caret","Forms","Flex","SearchBar","Spinner","Scrollers","Margins","FormClasses","ContextMenu","PlaceholderClasses","DiscordModules","NOOP_RET","_","resolve","result","moduleId","Modules","matches","some","current","cloned","promise","reduce","modules","mapper","LoggerModule","log","message","info","debug","create","parseType","Store","has","events","Set","add","off","delete","emit","toFire","logger","constructor","useEvent","factory","validate","state","setState","useState","useEffect","Utilities","loadJSON","file","JSON","parse","FS","readFile","object","properties","keys","defineProperties","fromEntries","value","writeable","configurable","memoize","target","defineProperty","Logger","Path","Storage","initialize","exists","folder","createDirectory","get","merge","filepath","data","Error","createFile","final","set","stringify","getMisc","misc","setMisc","split","Map","getBasePath","AsyncComponent","_provider","_fallback","Component","setComponent","comp","fallback","resolved","component","createElement","fromPromise","ErrorBoundary","getDerivedStateFromError","componentDidCatch","errorInfo","render","p","children","SettingsContext","createContext","Settings","HolySettings","header","subPage","setSubPage","label","hasSubPage","useMemo","API","setPage","reset","Provider","div","className","onClick","Fragment","direction","Directions","RIGHT","apply","injection","child","after","tempReturn","method","originalMethod","uninject","types","inject","validateOptions","SettingsRenderer","registerPanel","order","tab","panels","find","e","panel","section","element","sort","sortPanels","unregisterPanel","a","b","patchSettingsView","SettingsView","Injector","caller","__","toLowerCase","s","defaultPanels","Compilers","nodeGlobals","join","globalPaths","createBindings","extensions","handler","ext","filename","fileContent","compileJS","_compile","filecontent","compileTS","content","compileSCSS","unsafeExecuteJS","Module","code","wrapped","eval","require","path","parent","dirname","loaded","startsWith","createRequire","_path","load","hasExtension","Boolean","extname","getExtension","collectPNPMStores","node_modules","store","getStats","isDirectory","readDirectory","fullPath","resolveGlobalPath","directMatch","globalPath","withExtension","getGlobalPath","fromGlobals","allPaths","flatMap","fromPNPM","getParent","concatPath","resolveMain","files","pkg","Reflect","main","globalMod","pth","getFilePath","combined","isFile","stats","loader","NodeModule","_extensions","_load","Require","DiscordIcon","IconComponent","ToolButton","icon","danger","disabled","Tooltip","text","position","look","Looks","BLANK","size","Sizes","NONE","color","width","height","ButtonWrapper","onChange","isChecked","setChecked","checked","AddonCard","addon","manager","toggle","isEnabled","forceUpdate","useReducer","n","useContext","entityID","style","manifest","replace","version","author","reload","description","sortLabels","searchLabels","orderLabels","sortAddons","addons","query","searchOptions","sortBy","includes","first","second","localeCompare","OverflowContextMenu","addonType","Menu","navId","ControlItem","control","h5","Separator","Group","RadioItem","toUpperCase","action","CheckboxItem","AddonPanel","ManagerAddons","setQuery","setAddons","values","onQueryChange","onClear","placeholder","SMALL","open","openSettings","emptyStateImage","GIFT_CONFIRMATION_HEADER_FAIL","SEARCH_NO_RESULTS","PluginsManager","enabledPlugins","bind","plugins","plugin","loadAllPlugins","pluginOrId","getManifest","getEntryFile","entry","filenames","manifestPath","loadPlugin","clearCache","location","isAbsolute","basename","entryFile","partialExports","freeze","startPlugin","unloadPlugin","success","stopPlugin","onStart","onStop","reloadPlugin","enablePlugin","saveState","disablePlugin","ThemesManager","DOM","head","document","appendChild","node","append","injectCSS","cssOrURL","textContent","rel","href","documentHead","elements","injectJS","url","reject","script","src","onload","onerror","getElement","querySelector","clearCSS","remove","HolyMod","start","DiscordPromise","injectStyles","Plugins","Themes","stop"],"mappings":"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"}